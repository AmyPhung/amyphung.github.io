<!DOCTYPE html>
<html lang="en">
  <!-- TODO: Figure out why this needs to be here -->
  <script src="/js/gallery.js"></script>

  <!-- Beautiful Jekyll | MIT license | Copyright Dean Attali 2016 -->
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Particle Filter</title>

  <meta name="author" content="Amy Phung" />

  
  <meta name="description" content="Implementing a particle filter for mobile robot localization">
  

  <link rel="alternate" type="application/rss+xml" title="Amy Phung - Amy Phung's personal website & blog" href="/feed.xml" />

  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KVB79MNVY1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KVB79MNVY1');
</script>

  
  

  
    
      
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" />

    
  

  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
      <link rel="stylesheet" href="/css/button.css" />
    
      <link rel="stylesheet" href="/css/image-caption.css" />
    
      <link rel="stylesheet" href="/css/gallery.css" />
    
      <link rel="stylesheet" href="/css/overlay.css" />
    
  

  
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

  

  

  

    <!-- Facebook OpenGraph tags -->
  
  <meta property="fb:app_id" content="600762203989703" />
  

  
  <meta property="og:title" content="Particle Filter" />
  

   
  <meta property="og:description" content="Implementing a particle filter for mobile robot localization">
  


  <meta property="og:type" content="website" />

  
  <meta property="og:url" content="/particle-filter/" />
  <link rel="canonical" href="/particle-filter/" />
  

  
  <meta property="og:image" content="/img/projects/comprobo/particle-filter-cover-img.png" />
  


  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <meta name="twitter:creator" content="@" />

  
  <meta name="twitter:title" content="Particle Filter" />
  

  
  <meta name="twitter:description" content="Implementing a particle filter for mobile robot localization">
  

  
  <meta name="twitter:image" content="/img/projects/comprobo/particle-filter-cover-img.png" />
  

  

</head>


  <body>

    

    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
        <!-- <a class="navbar-brand" href="">Amy Phung</a> -->
        <a class="navbar-brand" href="https://amyphung.github.io">Amy Phung</a>
      
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
            






<a href="/#">Home</a>

          </li>
        
        
        
          <li>
            






<a href="/publications">Publications</a>

          </li>
        
        
        
          <li class="navlinks-container">
            <a class="navlinks-parent" href="javascript:void(0)">Projects</a>
            <div class="navlinks-children">
              
                
                  






<a href="/projects">All Projects</a>

                
              
                
                  






<a href="/tags">Projects by Category</a>

                
              
            </div>
          </li>
        
        
        
          <li>
            






<a href="/sea">SEA Semester</a>

          </li>
        
        
        
          <li>
            






<a href="/blog">Blog</a>

          </li>
        
        
        
          <li>
            






<a href="/aboutme">About Me</a>

          </li>
        
        
      </ul>
    </div>

	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <!-- <a href=" "> -->
    <a href="https://amyphung.github.io ">
	      <img class="avatar-img" src="/img/website/profile.jpg" />
		</a>
	  </div>
	</div>
	

  </div>
</nav>


    <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Particle Filter</h1>
		  
		    
			<h2 class="post-subheading">Implementing a particle filter for mobile robot localization</h2>
			
		  

		  
		  <!--<span class="post-meta">Posted on October 2, 2020</span>-->
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

      

      
        <div class="blog-tags">
          Tags:
          
          
            <a href="/tags#Computational-Robotics">Computational-Robotics</a>
          
          
        </div>
      

      <article role="main" class="blog-post">
        <p>As one of the first few projects in my <a href="https://comprobo20.github.io/">Computational Robotics course</a>, my project group and I implemented a Particle Filter to help localize a robot based on lidar data (in layman’s terms - figured out where the robot is on a map based on sensor input). As one of the earlier projects in this course, this project was fairly scaffolded, with starter code and data provided. Our primary focus while working on this project was to gain a strong understanding of the theoretical underpinnings of the Particle Filter (in particular, why this approximation is needed and why this method works) and practice taking the project from theory to implementation. The project assignment description can be found <a href="https://comprobo20.github.io/assignments/robot_localization">here</a>.</p>

<p>Project Partners: Eamon O’Brien, Emma Pan</p>

<h2 id="project-results">Project Results</h2>
<p>The overall results from testing our particle filter on pre-recorded data can be seen below. Note that the large red arrow represents the “ground truth” (aka the actual position of the robot based on a camera looking at fiducial tags on the ceiling), and the robot represents our filter’s best estimate of the robot’s current position. Each small arrow represents a “hypothesis” of a possible location of the robot, and its color indicates how much we believe in that estimate based on what our lidar is currently seeing (where red = unlikely hypothesis, green = likely hypothesis).</p>

<p><img src="https://github.com/AmyPhung/robot_localization/blob/master/robot_localizer/img/map1.gif?raw=true" alt="test results from bag 1" /></p>

<p><img src="https://github.com/AmyPhung/robot_localization/blob/master/robot_localizer/img/map2.gif?raw=true" alt="test results from bag 2" /></p>

<p><img src="https://github.com/AmyPhung/robot_localization/blob/master/robot_localizer/img/map3.gif?raw=true" alt="test results from bag 3" /></p>

<p><img src="https://github.com/AmyPhung/robot_localization/blob/master/robot_localizer/img/map4.gif?raw=true" alt="test results from bag 4" /></p>

<h2 id="project-details-excerpt-of-our-write-up">Project Details (excerpt of our write-up)</h2>
<h4 id="project-goal">Project goal</h4>
<p>The objective of implementing a Particle Filter is to create a method for figuring out where the robot is within a known map. Although there are mathematically straightforward ways to compute this, there are usually runtime considerations that prevent these from being implemented as-is. In a particle filter, we attempt to compute a “good enough” approximation by tracking and updating a series of poses, which we assign weights to that represent our level of confidence in that particular pose.</p>
<h4 id="what-we-did">What we did</h4>
<p>The following steps are implemented in our Particle Filter:</p>

<ul>
  <li>Create a series of particles with varying positions and poses around our initial estimate (high uncertainty, lots of variation)</li>
  <li>Compute weights for each particle
    <ul>
      <li>Line up the center of the lidar data with the particle</li>
      <li>For each point in the lidar, compute what map position that’d be using the following pseudocode:
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      x  = particle.x + point_r*cos(point_theta + particle.theta)
      y  = particle.y + point_r*sin(point_theta + particle.theta)
</code></pre></div>        </div>
      </li>
      <li>For each of the projected lidar points, compute the distance to the nearest point in the map
 	+ If the projection is off the map, discard the projection</li>
      <li>Compute the average distance between the projection and the map</li>
      <li>Create a weight value that is inversely proportional to the distance</li>
    </ul>
  </li>
  <li>Normalize weights (adjust weights such that their sum equal 1)</li>
  <li>Update most likely robot pose (computed by averaging the x,y, and theta of the top 20 or so particles)</li>
  <li>Resample particles (randomly choose particles from a weighted set, add noise that is proportional to the variance)</li>
  <li>Update particles with the odometry (move all of the particles based on movement reported by the robot’s encoders) using the following pseudocode:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>r = distance(prev_pose, current_pose)
for each particle in the particle cloud:
      particle.x += r*cos(particle.theta)
      particle.y += r*sin(particle.theta)
</code></pre></div>    </div>
  </li>
  <li>Go back to the compute weights step and repeat the process</li>
</ul>

<h2 id="full-project-write-up">Full Project Write-up</h2>

<p>To read more about this project and to see our full-length project write-up, visit the link below!</p>

<center>
	<a href="https://github.com/AmyPhung/robot_localization" class="button buttonblack" style="text-decoration: none" target="_blank" rel="noopener noreferrer">
		  GitHub Repo &amp; Project Write-up
	</a>
</center>

      </article>

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
  <!--- Share on Twitter -->
    <a href="https://twitter.com/intent/tweet?text=Particle+Filter+https://amyphung.github.io/particle-filter/"
      class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fa fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  
  <!--- Share on Facebook -->
    <a href="https://www.facebook.com/sharer/sharer.php?u=https://amyphung.github.io/particle-filter/"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fa fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  

  
  <!--- Share on LinkedIn -->
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://amyphung.github.io/particle-filter/"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fa fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

</section>



      

      <ul class="pager blog-pager">
        
        <!-- Disconnect SEA and project posts  -->
          
            <li class="previous">
              <a href="/chl-a-comparison/" data-toggle="tooltip" data-placement="top" title="Chlorophyll-a Comparison">&larr; Previous Post</a>
            </li>
          
        
        
        <!-- Disconnect SEA and project posts  -->
          
            <li class="next">
              <a href="/two-view-reconstruction/" data-toggle="tooltip" data-placement="top" title="Image-based 3D reconstruction">Next Post &rarr;</a>
            </li>
          
        
      </ul>

      
        <div class="disqus-comments">
          
        </div>
          <div class="comments">
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
       var js, fjs = d.getElementsByTagName(s)[0];
       if (d.getElementById(id)) return;
       js = d.createElement(s); js.id = id;
       js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.12&appId=600762203989703&autoLogAppEvents=1';
       fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <div class="fb-comments" data-href="/particle-filter/" data-width="100%" data-numposts="5"></div>
    <noscript>Please enable JavaScript to view the comments powered by Facebook.</noscript>
</div>
      
    </div>
  </div>
</div>


    <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links"><li><a href="mailto:amyngph@gmail.com" title="Email me"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Email me</span>
              </a>
            </li><li><a href="https://www.facebook.com/amy.n.phung" title="Facebook"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Facebook</span>
              </a>
            </li><li><a href="https://github.com/amyphung" title="GitHub"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">GitHub</span>
              </a>
            </li><li><a href="https://linkedin.com/in/amy-phung" title="LinkedIn"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">LinkedIn</span>
              </a>
            </li><li><a href="https://scholar.google.com/citations?hl=en&user=UeDEjpoAAAAJ&view_op=list_works&gmla=AJsN-F7dSnx6VnJDpdt3N0cBYrrhtmKchWBRBYyVsvv1KRDaU2CqtR8NQ23vNWCgT9h5SsgtdERHTWOERjx3JNOrMNRn47QttA_3-V72DZWQ3JBy_W_jMag" title="Google Scholar"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-graduation-cap fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Google Scholar</span>
              </a>
            </li></ul>
      <p class="copyright text-muted">
      Amy Phung
      &nbsp;&bull;&nbsp;
      2025

      
      &nbsp;&bull;&nbsp;
      <a href="">https://amyphung.github.io/</a>
      

      
      </p>
          <!-- Please don't remove this, keep my open source work credited :) -->
    <p class="theme-by text-muted">
      Theme by
      <a href="http://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
    </p>
      </div>
    </div>
  </div>
</footer>


    






  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
      	if (typeof jQuery == 'undefined') {
      	  document.write('<script src="/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
      	}
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/main.js"></script>
    
  





  </body>


</html>
